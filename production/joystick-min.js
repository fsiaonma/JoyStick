var Config={StickV:1,TargetV:1};var JoyStick=function(e){var e=e,t=Config.TargetV,n=Config.StickV,r=null,i=null,s=null,o=null,u=function(t){var n=e.x<t.x&&t.x<e.x+e.width,r=e.x<t.y&&t.y<e.y+e.height;return n&&r};this.setBasePos=function(e){u(e)&&(r={x:e.x,y:e.y},i&&i())},this.getDpos=function(e){if(u(e)){var i=e.x-r.x,o=e.y-r.y,a=Math.sqrt(Math.pow(i,2)+Math.pow(o,2));return s&&s(),{stickV:{x:n*i/a,y:n*o/a},targetV:{x:t*i/a,y:t*o/a}}}},this.resetPos=function(){o&&o(),r=null,i=null,s=null,o=null},this.bindTouchStart=function(e){i=e},this.bindTouchMove=function(e){s=e},this.bindTouchEnd=function(e){o=e}};(function(){var e=null;JoyStick.getInstance=function(t){return null==e&&(e=new JoyStick(t)),e}})();